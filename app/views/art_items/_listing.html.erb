<%= turbo_stream_from :art_items %>
<div id="itemsListing">
  <div class="">
    <div class="mb-4 sm:flex-auto">
      <h2 class="text-lg font-medium text-black">All Art Items</h2>
      <span class= "text-xs font-normal font-body">Grouped by department</span>
    </div>
  </div>

  <div class="">
    <% @departments_list.each do |dept|%>
      <div class="text-xl font-medium"><%= dept.fullname unless dept.art_items.empty? %></div>
      <div class= "mt-4 flex">
        <% dept.art_items.each do |item| %>   
          <div class="w-1/3 mx-2 rounded shadow-lg">
            <% if item.images.first.present? %>
              <%= image_tag(item.images.first.representation(resize_to_limit: [200, 200]), class: 'mx-auto') %>
            <% else %>
              <%= image_tag("block_m-hex", size: "200", class: 'mx-auto px-2') %>
            <% end %>
            <div class="px-6 py-4">
              <p class="text-gray-700 text-base">
                <%= item.description.to_plain_text.truncate(40) %>
              </p>
              <p class="text-black text-base">
                <%= item.location_building %> <br> <span class="text-gray-700">Room: <%= item.location_room.truncate(30) %>
              </p>
              <p class="text-base">
                <%= number_to_currency(item.value_cost, precision: 0) %>
              </p>
              <p class="mt-4 text-black text-base">
                <%= link_to 'Read more >', art_item_path(item), class: "text-indigo-600 hover:text-indigo-900" %><span class="sr-only"><%= item.id %></span></a>
              </p>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>




</div>
